<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Git Storage</title><style>.not-found[data-v-c6560ae6]{background:#0f172a99;border:1px dashed rgba(226,232,240,.4);border-radius:.75rem;padding:2rem}</style><style>pre code .line{display:block;min-height:1rem}</style><link rel="stylesheet" href="/_nuxt/entry.C1ivNxpE.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/storage/_payload.json?e4fe02ea-6bc8-45d4-bc4d-975b2487ed8f"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CDLzvtxH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BqALjSSV.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dv5406Vi.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DcY57FRn.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BpTGhJSW.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DX9iewSJ.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CK0MDvVG.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/tAM4eT7l.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B8IaAclc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/SWVst1k5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BGtqbFQp.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/wiF3njQF.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CVYcWZt5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/9E__YZjA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BCJHP5wR.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C-6gmq5J.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DxvdtyDP.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DEiAiKCt.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/e4fe02ea-6bc8-45d4-bc4d-975b2487ed8f.json"><meta name="description" content="How BundleWatch persists metrics in an orphan branch."><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta property="og:title" content="Git Storage"><meta property="og:description" content="How BundleWatch persists metrics in an orphan branch."><script type="module" src="/_nuxt/CDLzvtxH.js" crossorigin></script></head><body><div id="__nuxt"><div class="prose" data-v-c6560ae6><!--[--><div><h1 id="git-storage"><!--[-->ðŸ’¾ Git Storage<!--]--></h1><p><!--[-->BundleWatch avoids external databases by storing metrics JSON files inside a dedicated Git branch (default: <code class=""><!--[-->bundlewatch-data<!--]--></code>). Each CI run writes the current metrics and updates <code class=""><!--[-->latest.json<!--]--></code> per branch. This keeps history auditable and makes comparisons trivial.<!--]--></p><h2 id="how-it-works"><a href="#how-it-works"><!--[-->How it works<!--]--></a></h2><ol><!--[--><li><!--[-->BundleWatch collects metrics after your build (plugins or CLI).<!--]--></li><li><!--[-->Metrics get written to <code class=""><!--[-->data/&lt;code-branch&gt;/&lt;timestamp&gt;-&lt;commit&gt;.json<!--]--></code>.<!--]--></li><li><!--[--><code class=""><!--[-->latest.json<!--]--></code> holds the most recent snapshot per branch for quick lookups.<!--]--></li><li><!--[-->CI pushes the orphan branch back to origin.<!--]--></li><!--]--></ol><!--[--><pre class="" style=""><!--[--><code>.git/
â””â”€ bundlewatch-data
   â””â”€ data/
      â”œâ”€ main/
      â”‚  â”œâ”€ 1730939472000-abc1234.json
      â”‚  â””â”€ latest.json
      â””â”€ feature/my-change/
         â””â”€ ...
</code><!--]--></pre><!--]--><h2 id="configuring-ci"><a href="#configuring-ci"><!--[-->Configuring CI<!--]--></a></h2><!--[--><pre class="language-yaml shiki shiki-themes github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#85E89D">permissions</span><span style="--shiki-default:#E1E4E8">:
</span></span><span class="line" line="2"><span style="--shiki-default:#85E89D">  contents</span><span style="--shiki-default:#E1E4E8">: </span><span style="--shiki-default:#9ECBFF">write
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span style="--shiki-default:#85E89D">steps</span><span style="--shiki-default:#E1E4E8">:
</span></span><span class="line" line="5"><span style="--shiki-default:#E1E4E8">  - </span><span style="--shiki-default:#85E89D">uses</span><span style="--shiki-default:#E1E4E8">: </span><span style="--shiki-default:#9ECBFF">actions/checkout@v4
</span></span><span class="line" line="6"><span style="--shiki-default:#85E89D">    with</span><span style="--shiki-default:#E1E4E8">:
</span></span><span class="line" line="7"><span style="--shiki-default:#85E89D">      fetch-depth</span><span style="--shiki-default:#E1E4E8">: </span><span style="--shiki-default:#79B8FF">0
</span></span><span class="line" line="8"><span style="--shiki-default:#E1E4E8">  - </span><span style="--shiki-default:#85E89D">run</span><span style="--shiki-default:#E1E4E8">: </span><span style="--shiki-default:#9ECBFF">pnpm install
</span></span><span class="line" line="9"><span style="--shiki-default:#E1E4E8">  - </span><span style="--shiki-default:#85E89D">run</span><span style="--shiki-default:#E1E4E8">: </span><span style="--shiki-default:#9ECBFF">pnpm build
</span></span></code><!--]--></pre><!--]--><p><!--[-->Set <code class=""><!--[-->saveToGit: true<!--]--></code> (default in CI) on the plugin or CLI call so metrics are persisted automatically.<!--]--></p><h2 id="switching-branches-or-remotes"><a href="#switching-branches-or-remotes"><!--[-->Switching branches or remotes<!--]--></a></h2><p><!--[-->All storage helpers accept overrides:<!--]--></p><!--[--><pre class="language-ts shiki shiki-themes github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#F97583">const</span><span style="--shiki-default:#79B8FF"> storage</span><span style="--shiki-default:#F97583"> =</span><span style="--shiki-default:#F97583"> new</span><span style="--shiki-default:#B392F0"> GitStorage</span><span style="--shiki-default:#E1E4E8">({
</span></span><span class="line" line="2"><span style="--shiki-default:#E1E4E8">  branch: </span><span style="--shiki-default:#9ECBFF">&#39;bundlewatch-data&#39;</span><span style="--shiki-default:#E1E4E8">,
</span></span><span class="line" line="3"><span style="--shiki-default:#E1E4E8">  remote: </span><span style="--shiki-default:#9ECBFF">&#39;origin&#39;</span><span style="--shiki-default:#E1E4E8">,
</span></span><span class="line" line="4"><span style="--shiki-default:#E1E4E8">});
</span></span></code><!--]--></pre><!--]--><p><!--[-->Keep the docs aligned with the code by updating this section whenever the storage contract changes.<!--]--></p><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}</style></div><!--]--></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/storage/_payload.json?e4fe02ea-6bc8-45d4-bc4d-975b2487ed8f">[{"state":1,"once":465,"_errors":466,"serverRendered":160,"path":7,"prerenderedAt":468},["Reactive",2],{"$sdd-pages":3,"$sdd-surrounds":409,"$sdd-globals":427,"$sdd-navigation":429},["ShallowRef",4],["ShallowReactive",5],{"/storage":6},{"_path":7,"_dir":8,"_draft":9,"_partial":9,"_locale":8,"title":10,"description":11,"body":12,"_type":402,"_id":403,"_source":404,"_file":405,"_stem":406,"_extension":407,"layout":408},"/storage","",false,"Git Storage","How BundleWatch persists metrics in an orphan branch.",{"type":13,"children":14,"toc":397},"root",[15,24,47,54,92,101,107,275,288,294,299,386,391],{"type":16,"tag":17,"props":18,"children":20},"element","h1",{"id":19},"git-storage",[21],{"type":22,"value":23},"text","ðŸ’¾ Git Storage",{"type":16,"tag":25,"props":26,"children":27},"p",{},[28,30,37,39,45],{"type":22,"value":29},"BundleWatch avoids external databases by storing metrics JSON files inside a dedicated Git branch (default: ",{"type":16,"tag":31,"props":32,"children":34},"code",{"className":33},[],[35],{"type":22,"value":36},"bundlewatch-data",{"type":22,"value":38},"). Each CI run writes the current metrics and updates ",{"type":16,"tag":31,"props":40,"children":42},{"className":41},[],[43],{"type":22,"value":44},"latest.json",{"type":22,"value":46}," per branch. This keeps history auditable and makes comparisons trivial.",{"type":16,"tag":48,"props":49,"children":51},"h2",{"id":50},"how-it-works",[52],{"type":22,"value":53},"How it works",{"type":16,"tag":55,"props":56,"children":57},"ol",{},[58,64,77,87],{"type":16,"tag":59,"props":60,"children":61},"li",{},[62],{"type":22,"value":63},"BundleWatch collects metrics after your build (plugins or CLI).",{"type":16,"tag":59,"props":65,"children":66},{},[67,69,75],{"type":22,"value":68},"Metrics get written to ",{"type":16,"tag":31,"props":70,"children":72},{"className":71},[],[73],{"type":22,"value":74},"data/\u003Ccode-branch>/\u003Ctimestamp>-\u003Ccommit>.json",{"type":22,"value":76},".",{"type":16,"tag":59,"props":78,"children":79},{},[80,85],{"type":16,"tag":31,"props":81,"children":83},{"className":82},[],[84],{"type":22,"value":44},{"type":22,"value":86}," holds the most recent snapshot per branch for quick lookups.",{"type":16,"tag":59,"props":88,"children":89},{},[90],{"type":22,"value":91},"CI pushes the orphan branch back to origin.",{"type":16,"tag":93,"props":94,"children":96},"pre",{"code":95},".git/\nâ””â”€ bundlewatch-data\n   â””â”€ data/\n      â”œâ”€ main/\n      â”‚  â”œâ”€ 1730939472000-abc1234.json\n      â”‚  â””â”€ latest.json\n      â””â”€ feature/my-change/\n         â””â”€ ...\n",[97],{"type":16,"tag":31,"props":98,"children":99},{"__ignoreMap":8},[100],{"type":22,"value":95},{"type":16,"tag":48,"props":102,"children":104},{"id":103},"configuring-ci",[105],{"type":22,"value":106},"Configuring CI",{"type":16,"tag":93,"props":108,"children":112},{"code":109,"language":110,"meta":8,"className":111,"style":8},"permissions:\n  contents: write\n\nsteps:\n  - uses: actions/checkout@v4\n    with:\n      fetch-depth: 0\n  - run: pnpm install\n  - run: pnpm build\n","yaml","language-yaml shiki shiki-themes github-dark",[113],{"type":16,"tag":31,"props":114,"children":115},{"__ignoreMap":8},[116,134,154,164,177,200,213,232,254],{"type":16,"tag":117,"props":118,"children":121},"span",{"class":119,"line":120},"line",1,[122,128],{"type":16,"tag":117,"props":123,"children":125},{"style":124},"--shiki-default:#85E89D",[126],{"type":22,"value":127},"permissions",{"type":16,"tag":117,"props":129,"children":131},{"style":130},"--shiki-default:#E1E4E8",[132],{"type":22,"value":133},":\n",{"type":16,"tag":117,"props":135,"children":137},{"class":119,"line":136},2,[138,143,148],{"type":16,"tag":117,"props":139,"children":140},{"style":124},[141],{"type":22,"value":142},"  contents",{"type":16,"tag":117,"props":144,"children":145},{"style":130},[146],{"type":22,"value":147},": ",{"type":16,"tag":117,"props":149,"children":151},{"style":150},"--shiki-default:#9ECBFF",[152],{"type":22,"value":153},"write\n",{"type":16,"tag":117,"props":155,"children":157},{"class":119,"line":156},3,[158],{"type":16,"tag":117,"props":159,"children":161},{"emptyLinePlaceholder":160},true,[162],{"type":22,"value":163},"\n",{"type":16,"tag":117,"props":165,"children":167},{"class":119,"line":166},4,[168,173],{"type":16,"tag":117,"props":169,"children":170},{"style":124},[171],{"type":22,"value":172},"steps",{"type":16,"tag":117,"props":174,"children":175},{"style":130},[176],{"type":22,"value":133},{"type":16,"tag":117,"props":178,"children":180},{"class":119,"line":179},5,[181,186,191,195],{"type":16,"tag":117,"props":182,"children":183},{"style":130},[184],{"type":22,"value":185},"  - ",{"type":16,"tag":117,"props":187,"children":188},{"style":124},[189],{"type":22,"value":190},"uses",{"type":16,"tag":117,"props":192,"children":193},{"style":130},[194],{"type":22,"value":147},{"type":16,"tag":117,"props":196,"children":197},{"style":150},[198],{"type":22,"value":199},"actions/checkout@v4\n",{"type":16,"tag":117,"props":201,"children":203},{"class":119,"line":202},6,[204,209],{"type":16,"tag":117,"props":205,"children":206},{"style":124},[207],{"type":22,"value":208},"    with",{"type":16,"tag":117,"props":210,"children":211},{"style":130},[212],{"type":22,"value":133},{"type":16,"tag":117,"props":214,"children":216},{"class":119,"line":215},7,[217,222,226],{"type":16,"tag":117,"props":218,"children":219},{"style":124},[220],{"type":22,"value":221},"      fetch-depth",{"type":16,"tag":117,"props":223,"children":224},{"style":130},[225],{"type":22,"value":147},{"type":16,"tag":117,"props":227,"children":229},{"style":228},"--shiki-default:#79B8FF",[230],{"type":22,"value":231},"0\n",{"type":16,"tag":117,"props":233,"children":235},{"class":119,"line":234},8,[236,240,245,249],{"type":16,"tag":117,"props":237,"children":238},{"style":130},[239],{"type":22,"value":185},{"type":16,"tag":117,"props":241,"children":242},{"style":124},[243],{"type":22,"value":244},"run",{"type":16,"tag":117,"props":246,"children":247},{"style":130},[248],{"type":22,"value":147},{"type":16,"tag":117,"props":250,"children":251},{"style":150},[252],{"type":22,"value":253},"pnpm install\n",{"type":16,"tag":117,"props":255,"children":257},{"class":119,"line":256},9,[258,262,266,270],{"type":16,"tag":117,"props":259,"children":260},{"style":130},[261],{"type":22,"value":185},{"type":16,"tag":117,"props":263,"children":264},{"style":124},[265],{"type":22,"value":244},{"type":16,"tag":117,"props":267,"children":268},{"style":130},[269],{"type":22,"value":147},{"type":16,"tag":117,"props":271,"children":272},{"style":150},[273],{"type":22,"value":274},"pnpm build\n",{"type":16,"tag":25,"props":276,"children":277},{},[278,280,286],{"type":22,"value":279},"Set ",{"type":16,"tag":31,"props":281,"children":283},{"className":282},[],[284],{"type":22,"value":285},"saveToGit: true",{"type":22,"value":287}," (default in CI) on the plugin or CLI call so metrics are persisted automatically.",{"type":16,"tag":48,"props":289,"children":291},{"id":290},"switching-branches-or-remotes",[292],{"type":22,"value":293},"Switching branches or remotes",{"type":16,"tag":25,"props":295,"children":296},{},[297],{"type":22,"value":298},"All storage helpers accept overrides:",{"type":16,"tag":93,"props":300,"children":304},{"code":301,"language":302,"meta":8,"className":303,"style":8},"const storage = new GitStorage({\n  branch: 'bundlewatch-data',\n  remote: 'origin',\n});\n","ts","language-ts shiki shiki-themes github-dark",[305],{"type":16,"tag":31,"props":306,"children":307},{"__ignoreMap":8},[308,343,361,378],{"type":16,"tag":117,"props":309,"children":310},{"class":119,"line":120},[311,317,322,327,332,338],{"type":16,"tag":117,"props":312,"children":314},{"style":313},"--shiki-default:#F97583",[315],{"type":22,"value":316},"const",{"type":16,"tag":117,"props":318,"children":319},{"style":228},[320],{"type":22,"value":321}," storage",{"type":16,"tag":117,"props":323,"children":324},{"style":313},[325],{"type":22,"value":326}," =",{"type":16,"tag":117,"props":328,"children":329},{"style":313},[330],{"type":22,"value":331}," new",{"type":16,"tag":117,"props":333,"children":335},{"style":334},"--shiki-default:#B392F0",[336],{"type":22,"value":337}," GitStorage",{"type":16,"tag":117,"props":339,"children":340},{"style":130},[341],{"type":22,"value":342},"({\n",{"type":16,"tag":117,"props":344,"children":345},{"class":119,"line":136},[346,351,356],{"type":16,"tag":117,"props":347,"children":348},{"style":130},[349],{"type":22,"value":350},"  branch: ",{"type":16,"tag":117,"props":352,"children":353},{"style":150},[354],{"type":22,"value":355},"'bundlewatch-data'",{"type":16,"tag":117,"props":357,"children":358},{"style":130},[359],{"type":22,"value":360},",\n",{"type":16,"tag":117,"props":362,"children":363},{"class":119,"line":156},[364,369,374],{"type":16,"tag":117,"props":365,"children":366},{"style":130},[367],{"type":22,"value":368},"  remote: ",{"type":16,"tag":117,"props":370,"children":371},{"style":150},[372],{"type":22,"value":373},"'origin'",{"type":16,"tag":117,"props":375,"children":376},{"style":130},[377],{"type":22,"value":360},{"type":16,"tag":117,"props":379,"children":380},{"class":119,"line":166},[381],{"type":16,"tag":117,"props":382,"children":383},{"style":130},[384],{"type":22,"value":385},"});\n",{"type":16,"tag":25,"props":387,"children":388},{},[389],{"type":22,"value":390},"Keep the docs aligned with the code by updating this section whenever the storage contract changes.",{"type":16,"tag":392,"props":393,"children":394},"style",{},[395],{"type":22,"value":396},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":8,"searchDepth":136,"depth":136,"links":398},[399,400,401],{"id":50,"depth":136,"text":53},{"id":103,"depth":136,"text":106},{"id":290,"depth":136,"text":293},"markdown","content:storage.md","content","storage.md","storage","md","default",["ShallowRef",410],["ShallowReactive",411],{"/storage":412},[413,420],{"_path":414,"_dir":8,"_draft":9,"_partial":9,"_locale":8,"title":415,"description":416,"_type":402,"_id":417,"_source":404,"_file":418,"_stem":419,"_extension":407},"/next","Next.js Plugin","Add BundleWatch to Next.js builds with per-route metrics.","content:next.md","next.md","next",{"_path":421,"_dir":8,"_draft":9,"_partial":9,"_locale":8,"title":422,"description":423,"_type":402,"_id":424,"_source":404,"_file":425,"_stem":426,"_extension":407},"/vite","Vite Plugin","Wire BundleWatch into Vite or Rollup builds.","content:vite.md","vite.md","vite",["ShallowRef",428],{},[430,434,438,442,446,450,454,458,459,460,461],{"title":431,"_path":432,"description":433},"Architecture","/architecture","Understand how parsers, plugins, storage, and dashboards fit together.",{"title":435,"_path":436,"description":437},"CLI","/cli","Analyze any build output with the BundleWatch CLI.",{"title":439,"_path":440,"description":441},"Deployment","/deployment","Ship the docs to Cloudflare Workers (Pages has been sunset).",{"title":443,"_path":444,"description":445},"Examples","/examples","Run the sample apps in this repo to see each integration in action.",{"title":447,"_path":448,"description":449},"Framework Recipes","/framework-recipes","Apply the Vite plugin to Nuxt, SvelteKit, SolidStart, and other frameworks.",{"title":451,"_path":452,"description":453},"Getting Started","/getting-started","Install the docs workspace and connect BundleWatch to your builds.",{"title":455,"_path":456,"description":457},"Welcome","/","Understand what BundleWatch solves and how the docs are organized.",{"title":415,"_path":414,"description":416},{"title":10,"_path":7,"description":11},{"title":422,"_path":421,"description":423},{"title":462,"_path":463,"description":464},"Webpack Plugin","/webpack","Parser-powered integration for Webpack 5 projects.",["Set"],["ShallowReactive",467],{"content-query-aMQukRU4GJ":-1},1762641363227]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1762641359894,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:["description","layout"]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"github-dark",highlighter:"shiki",shikiEngine:"oniguruma",langs:["js","jsx","json","ts","tsx","vue","css","html","bash","md","mdc","yaml"]},wsUrl:"",documentDriven:{page:true,navigation:true,surround:true,globals:{},layoutFallbacks:["theme"],injectPage:true},host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildId:"e4fe02ea-6bc8-45d4-bc4d-975b2487ed8f",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>