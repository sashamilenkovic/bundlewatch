[{"data":1,"prerenderedAt":697},["ShallowReactive",2],{"content-query-6Lwmo58Sjn":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":5,"title":7,"description":8,"body":9,"_type":691,"_id":692,"_source":693,"_file":694,"_stem":695,"_extension":696},"/next","",false,"Next.js Plugin","Add BundleWatch to Next.js builds with per-route metrics.",{"type":10,"children":11,"toc":682},"root",[12,21,34,47,54,93,99,435,442,506,512,541,598,604,609,615,634,676],{"type":13,"tag":14,"props":15,"children":17},"element","h1",{"id":16},"nextjs-plugin",[18],{"type":19,"value":20},"text","▲ Next.js Plugin",{"type":13,"tag":22,"props":23,"children":24},"p",{},[25,27],{"type":19,"value":26},"Package: ",{"type":13,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":19,"value":33},"@milencode/bundlewatch-next-plugin",{"type":13,"tag":22,"props":35,"children":36},{},[37,39,45],{"type":19,"value":38},"This wrapper hooks into Next.js’ Webpack config to run BundleWatch after client builds complete. It currently reuses the core collector (like the CLI), but still provides per-route stats via ",{"type":13,"tag":28,"props":40,"children":42},{"className":41},[],[43],{"type":19,"value":44},"build-manifest.json",{"type":19,"value":46},".",{"type":13,"tag":48,"props":49,"children":51},"h2",{"id":50},"install",[52],{"type":19,"value":53},"Install",{"type":13,"tag":55,"props":56,"children":60},"pre",{"className":57,"code":58,"language":59,"meta":5,"style":5},"language-bash shiki shiki-themes github-dark","pnpm add -D @milencode/bundlewatch-next-plugin\n","bash",[61],{"type":13,"tag":28,"props":62,"children":63},{"__ignoreMap":5},[64],{"type":13,"tag":65,"props":66,"children":69},"span",{"class":67,"line":68},"line",1,[70,76,82,88],{"type":13,"tag":65,"props":71,"children":73},{"style":72},"--shiki-default:#B392F0",[74],{"type":19,"value":75},"pnpm",{"type":13,"tag":65,"props":77,"children":79},{"style":78},"--shiki-default:#9ECBFF",[80],{"type":19,"value":81}," add",{"type":13,"tag":65,"props":83,"children":85},{"style":84},"--shiki-default:#79B8FF",[86],{"type":19,"value":87}," -D",{"type":13,"tag":65,"props":89,"children":90},{"style":78},[91],{"type":19,"value":92}," @milencode/bundlewatch-next-plugin\n",{"type":13,"tag":48,"props":94,"children":96},{"id":95},"configure",[97],{"type":19,"value":98},"Configure",{"type":13,"tag":55,"props":100,"children":104},{"className":101,"code":102,"language":103,"meta":5,"style":5},"language-js shiki shiki-themes github-dark","// next.config.js\nconst { withBundleWatch } = require('@milencode/bundlewatch-next-plugin');\n\nmodule.exports = withBundleWatch(\n  {\n    reactStrictMode: true,\n    experimental: { instrumentationHook: true },\n  },\n  {\n    saveToGit: process.env.CI === 'true',\n    compareAgainst: 'main',\n    perRoute: true,\n    budgets: {\n      '/': { maxSize: 350 * 1024 },\n      '/dashboard': { maxGzipSize: 150 * 1024 },\n    },\n  },\n);\n","js",[105],{"type":13,"tag":28,"props":106,"children":107},{"__ignoreMap":5},[108,117,168,178,211,220,239,257,266,274,302,320,337,346,379,410,419,427],{"type":13,"tag":65,"props":109,"children":110},{"class":67,"line":68},[111],{"type":13,"tag":65,"props":112,"children":114},{"style":113},"--shiki-default:#6A737D",[115],{"type":19,"value":116},"// next.config.js\n",{"type":13,"tag":65,"props":118,"children":120},{"class":67,"line":119},2,[121,127,133,138,143,148,153,158,163],{"type":13,"tag":65,"props":122,"children":124},{"style":123},"--shiki-default:#F97583",[125],{"type":19,"value":126},"const",{"type":13,"tag":65,"props":128,"children":130},{"style":129},"--shiki-default:#E1E4E8",[131],{"type":19,"value":132}," { ",{"type":13,"tag":65,"props":134,"children":135},{"style":84},[136],{"type":19,"value":137},"withBundleWatch",{"type":13,"tag":65,"props":139,"children":140},{"style":129},[141],{"type":19,"value":142}," } ",{"type":13,"tag":65,"props":144,"children":145},{"style":123},[146],{"type":19,"value":147},"=",{"type":13,"tag":65,"props":149,"children":150},{"style":72},[151],{"type":19,"value":152}," require",{"type":13,"tag":65,"props":154,"children":155},{"style":129},[156],{"type":19,"value":157},"(",{"type":13,"tag":65,"props":159,"children":160},{"style":78},[161],{"type":19,"value":162},"'@milencode/bundlewatch-next-plugin'",{"type":13,"tag":65,"props":164,"children":165},{"style":129},[166],{"type":19,"value":167},");\n",{"type":13,"tag":65,"props":169,"children":171},{"class":67,"line":170},3,[172],{"type":13,"tag":65,"props":173,"children":175},{"emptyLinePlaceholder":174},true,[176],{"type":19,"value":177},"\n",{"type":13,"tag":65,"props":179,"children":181},{"class":67,"line":180},4,[182,187,191,196,201,206],{"type":13,"tag":65,"props":183,"children":184},{"style":84},[185],{"type":19,"value":186},"module",{"type":13,"tag":65,"props":188,"children":189},{"style":129},[190],{"type":19,"value":46},{"type":13,"tag":65,"props":192,"children":193},{"style":84},[194],{"type":19,"value":195},"exports",{"type":13,"tag":65,"props":197,"children":198},{"style":123},[199],{"type":19,"value":200}," =",{"type":13,"tag":65,"props":202,"children":203},{"style":72},[204],{"type":19,"value":205}," withBundleWatch",{"type":13,"tag":65,"props":207,"children":208},{"style":129},[209],{"type":19,"value":210},"(\n",{"type":13,"tag":65,"props":212,"children":214},{"class":67,"line":213},5,[215],{"type":13,"tag":65,"props":216,"children":217},{"style":129},[218],{"type":19,"value":219},"  {\n",{"type":13,"tag":65,"props":221,"children":223},{"class":67,"line":222},6,[224,229,234],{"type":13,"tag":65,"props":225,"children":226},{"style":129},[227],{"type":19,"value":228},"    reactStrictMode: ",{"type":13,"tag":65,"props":230,"children":231},{"style":84},[232],{"type":19,"value":233},"true",{"type":13,"tag":65,"props":235,"children":236},{"style":129},[237],{"type":19,"value":238},",\n",{"type":13,"tag":65,"props":240,"children":242},{"class":67,"line":241},7,[243,248,252],{"type":13,"tag":65,"props":244,"children":245},{"style":129},[246],{"type":19,"value":247},"    experimental: { instrumentationHook: ",{"type":13,"tag":65,"props":249,"children":250},{"style":84},[251],{"type":19,"value":233},{"type":13,"tag":65,"props":253,"children":254},{"style":129},[255],{"type":19,"value":256}," },\n",{"type":13,"tag":65,"props":258,"children":260},{"class":67,"line":259},8,[261],{"type":13,"tag":65,"props":262,"children":263},{"style":129},[264],{"type":19,"value":265},"  },\n",{"type":13,"tag":65,"props":267,"children":269},{"class":67,"line":268},9,[270],{"type":13,"tag":65,"props":271,"children":272},{"style":129},[273],{"type":19,"value":219},{"type":13,"tag":65,"props":275,"children":277},{"class":67,"line":276},10,[278,283,288,293,298],{"type":13,"tag":65,"props":279,"children":280},{"style":129},[281],{"type":19,"value":282},"    saveToGit: process.env.",{"type":13,"tag":65,"props":284,"children":285},{"style":84},[286],{"type":19,"value":287},"CI",{"type":13,"tag":65,"props":289,"children":290},{"style":123},[291],{"type":19,"value":292}," ===",{"type":13,"tag":65,"props":294,"children":295},{"style":78},[296],{"type":19,"value":297}," 'true'",{"type":13,"tag":65,"props":299,"children":300},{"style":129},[301],{"type":19,"value":238},{"type":13,"tag":65,"props":303,"children":305},{"class":67,"line":304},11,[306,311,316],{"type":13,"tag":65,"props":307,"children":308},{"style":129},[309],{"type":19,"value":310},"    compareAgainst: ",{"type":13,"tag":65,"props":312,"children":313},{"style":78},[314],{"type":19,"value":315},"'main'",{"type":13,"tag":65,"props":317,"children":318},{"style":129},[319],{"type":19,"value":238},{"type":13,"tag":65,"props":321,"children":323},{"class":67,"line":322},12,[324,329,333],{"type":13,"tag":65,"props":325,"children":326},{"style":129},[327],{"type":19,"value":328},"    perRoute: ",{"type":13,"tag":65,"props":330,"children":331},{"style":84},[332],{"type":19,"value":233},{"type":13,"tag":65,"props":334,"children":335},{"style":129},[336],{"type":19,"value":238},{"type":13,"tag":65,"props":338,"children":340},{"class":67,"line":339},13,[341],{"type":13,"tag":65,"props":342,"children":343},{"style":129},[344],{"type":19,"value":345},"    budgets: {\n",{"type":13,"tag":65,"props":347,"children":349},{"class":67,"line":348},14,[350,355,360,365,370,375],{"type":13,"tag":65,"props":351,"children":352},{"style":78},[353],{"type":19,"value":354},"      '/'",{"type":13,"tag":65,"props":356,"children":357},{"style":129},[358],{"type":19,"value":359},": { maxSize: ",{"type":13,"tag":65,"props":361,"children":362},{"style":84},[363],{"type":19,"value":364},"350",{"type":13,"tag":65,"props":366,"children":367},{"style":123},[368],{"type":19,"value":369}," *",{"type":13,"tag":65,"props":371,"children":372},{"style":84},[373],{"type":19,"value":374}," 1024",{"type":13,"tag":65,"props":376,"children":377},{"style":129},[378],{"type":19,"value":256},{"type":13,"tag":65,"props":380,"children":382},{"class":67,"line":381},15,[383,388,393,398,402,406],{"type":13,"tag":65,"props":384,"children":385},{"style":78},[386],{"type":19,"value":387},"      '/dashboard'",{"type":13,"tag":65,"props":389,"children":390},{"style":129},[391],{"type":19,"value":392},": { maxGzipSize: ",{"type":13,"tag":65,"props":394,"children":395},{"style":84},[396],{"type":19,"value":397},"150",{"type":13,"tag":65,"props":399,"children":400},{"style":123},[401],{"type":19,"value":369},{"type":13,"tag":65,"props":403,"children":404},{"style":84},[405],{"type":19,"value":374},{"type":13,"tag":65,"props":407,"children":408},{"style":129},[409],{"type":19,"value":256},{"type":13,"tag":65,"props":411,"children":413},{"class":67,"line":412},16,[414],{"type":13,"tag":65,"props":415,"children":416},{"style":129},[417],{"type":19,"value":418},"    },\n",{"type":13,"tag":65,"props":420,"children":422},{"class":67,"line":421},17,[423],{"type":13,"tag":65,"props":424,"children":425},{"style":129},[426],{"type":19,"value":265},{"type":13,"tag":65,"props":428,"children":430},{"class":67,"line":429},18,[431],{"type":13,"tag":65,"props":432,"children":433},{"style":129},[434],{"type":19,"value":167},{"type":13,"tag":436,"props":437,"children":439},"h3",{"id":438},"what-it-does",[440],{"type":19,"value":441},"What it does",{"type":13,"tag":443,"props":444,"children":445},"ul",{},[446,452,473,485],{"type":13,"tag":447,"props":448,"children":449},"li",{},[450],{"type":19,"value":451},"Wraps your exported config and injects a Webpack plugin that runs after the client bundle finishes.",{"type":13,"tag":447,"props":453,"children":454},{},[455,457,463,465,471],{"type":19,"value":456},"Calls ",{"type":13,"tag":28,"props":458,"children":460},{"className":459},[],[461],{"type":19,"value":462},"collectMetrics",{"type":19,"value":464}," on ",{"type":13,"tag":28,"props":466,"children":468},{"className":467},[],[469],{"type":19,"value":470},".next/static",{"type":19,"value":472}," to gather bundle sizes.",{"type":13,"tag":447,"props":474,"children":475},{},[476,478,484],{"type":19,"value":477},"Optionally prints a per-route table by reading ",{"type":13,"tag":28,"props":479,"children":481},{"className":480},[],[482],{"type":19,"value":483},".next/build-manifest.json",{"type":19,"value":46},{"type":13,"tag":447,"props":486,"children":487},{},[488,490,496,498,504],{"type":19,"value":489},"Uses ",{"type":13,"tag":28,"props":491,"children":493},{"className":492},[],[494],{"type":19,"value":495},"GitStorage",{"type":19,"value":497}," + ",{"type":13,"tag":28,"props":499,"children":501},{"className":500},[],[502],{"type":19,"value":503},"compareMetrics",{"type":19,"value":505}," just like the other integrations.",{"type":13,"tag":436,"props":507,"children":509},{"id":508},"route-budgets",[510],{"type":19,"value":511},"Route budgets",{"type":13,"tag":22,"props":513,"children":514},{},[515,517,523,525,531,533,539],{"type":19,"value":516},"Budgets are checked per pattern. If a route exceeds ",{"type":13,"tag":28,"props":518,"children":520},{"className":519},[],[521],{"type":19,"value":522},"maxSize",{"type":19,"value":524}," or ",{"type":13,"tag":28,"props":526,"children":528},{"className":527},[],[529],{"type":19,"value":530},"maxGzipSize",{"type":19,"value":532},", a warning prints (and the build fails if ",{"type":13,"tag":28,"props":534,"children":536},{"className":535},[],[537],{"type":19,"value":538},"failOnSizeIncrease",{"type":19,"value":540}," is set).",{"type":13,"tag":55,"props":542,"children":544},{"className":101,"code":543,"language":103,"meta":5,"style":5},"budgets: {\n  '/blog/*': { maxSize: 400 * 1024 },\n}\n",[545],{"type":13,"tag":28,"props":546,"children":547},{"__ignoreMap":5},[548,561,590],{"type":13,"tag":65,"props":549,"children":550},{"class":67,"line":68},[551,556],{"type":13,"tag":65,"props":552,"children":553},{"style":72},[554],{"type":19,"value":555},"budgets",{"type":13,"tag":65,"props":557,"children":558},{"style":129},[559],{"type":19,"value":560},": {\n",{"type":13,"tag":65,"props":562,"children":563},{"class":67,"line":119},[564,569,573,578,582,586],{"type":13,"tag":65,"props":565,"children":566},{"style":78},[567],{"type":19,"value":568},"  '/blog/*'",{"type":13,"tag":65,"props":570,"children":571},{"style":129},[572],{"type":19,"value":359},{"type":13,"tag":65,"props":574,"children":575},{"style":84},[576],{"type":19,"value":577},"400",{"type":13,"tag":65,"props":579,"children":580},{"style":123},[581],{"type":19,"value":369},{"type":13,"tag":65,"props":583,"children":584},{"style":84},[585],{"type":19,"value":374},{"type":13,"tag":65,"props":587,"children":588},{"style":129},[589],{"type":19,"value":256},{"type":13,"tag":65,"props":591,"children":592},{"class":67,"line":170},[593],{"type":13,"tag":65,"props":594,"children":595},{"style":129},[596],{"type":19,"value":597},"}\n",{"type":13,"tag":436,"props":599,"children":601},{"id":600},"upcoming-improvements",[602],{"type":19,"value":603},"Upcoming improvements",{"type":13,"tag":22,"props":605,"children":606},{},[607],{"type":19,"value":608},"Once the Webpack plugin exposes more parser data, the Next wrapper will piggyback on it to provide module-level insights and enhanced dashboards automatically. Watch the “next-plugin parser parity” issue for status.",{"type":13,"tag":436,"props":610,"children":612},{"id":611},"example-project",[613],{"type":19,"value":614},"Example project",{"type":13,"tag":22,"props":616,"children":617},{},[618,624,626,632],{"type":13,"tag":28,"props":619,"children":621},{"className":620},[],[622],{"type":19,"value":623},"examples/next-app",{"type":19,"value":625}," shows the simplest integration—only the client build runs BundleWatch, and dashboards are stored under ",{"type":13,"tag":28,"props":627,"children":629},{"className":628},[],[630],{"type":19,"value":631},"bundle-report/",{"type":19,"value":633},":",{"type":13,"tag":55,"props":635,"children":637},{"className":57,"code":636,"language":59,"meta":5,"style":5},"pnpm --filter example-next-app build\nopen examples/next-app/bundle-report/index.html\n",[638],{"type":13,"tag":28,"props":639,"children":640},{"__ignoreMap":5},[641,663],{"type":13,"tag":65,"props":642,"children":643},{"class":67,"line":68},[644,648,653,658],{"type":13,"tag":65,"props":645,"children":646},{"style":72},[647],{"type":19,"value":75},{"type":13,"tag":65,"props":649,"children":650},{"style":84},[651],{"type":19,"value":652}," --filter",{"type":13,"tag":65,"props":654,"children":655},{"style":78},[656],{"type":19,"value":657}," example-next-app",{"type":13,"tag":65,"props":659,"children":660},{"style":78},[661],{"type":19,"value":662}," build\n",{"type":13,"tag":65,"props":664,"children":665},{"class":67,"line":119},[666,671],{"type":13,"tag":65,"props":667,"children":668},{"style":72},[669],{"type":19,"value":670},"open",{"type":13,"tag":65,"props":672,"children":673},{"style":78},[674],{"type":19,"value":675}," examples/next-app/bundle-report/index.html\n",{"type":13,"tag":677,"props":678,"children":679},"style",{},[680],{"type":19,"value":681},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":5,"searchDepth":119,"depth":119,"links":683},[684,685],{"id":50,"depth":119,"text":53},{"id":95,"depth":119,"text":98,"children":686},[687,688,689,690],{"id":438,"depth":170,"text":441},{"id":508,"depth":170,"text":511},{"id":600,"depth":170,"text":603},{"id":611,"depth":170,"text":614},"markdown","content:next.md","content","next.md","next","md",1762641363228]