{"_path":"/vite","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Vite Plugin","description":"Wire BundleWatch into Vite or Rollup builds.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vite-plugin"},"children":[{"type":"text","value":"⚡ Vite Plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Package: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@milencode/bundlewatch-vite-plugin"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current Vite plugin relies on the legacy filesystem collector ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"MetricsCollector"}]},{"type":"text","value":") inside the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"closeBundle"}]},{"type":"text","value":" hook. A parser-driven version is in progress; until then you still get Git storage, comparisons, and dashboards."}]},{"type":"element","tag":"h2","props":{"id":"install"},"children":[{"type":"text","value":"Install"}]},{"type":"element","tag":"pre","props":{"code":"pnpm add -D @milencode/bundlewatch-vite-plugin\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -D"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" @milencode/bundlewatch-vite-plugin\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"configure"},"children":[{"type":"text","value":"Configure"}]},{"type":"element","tag":"pre","props":{"code":"// vite.config.ts\nimport { defineConfig } from 'vite';\nimport { bundleWatch } from '@milencode/bundlewatch-vite-plugin';\n\nexport default defineConfig({\n  plugins: [\n    bundleWatch({\n      printReport: true,\n      compareAgainst: 'main',\n      saveToGit: process.env.CI === 'true',\n      generateDashboard: true,\n    }),\n  ],\n});\n","language":"ts","meta":"","className":"language-ts shiki shiki-themes github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// vite.config.ts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" { defineConfig } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 'vite'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" { bundleWatch } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" '@milencode/bundlewatch-vite-plugin'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" defineConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  plugins: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"    bundleWatch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      printReport: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      compareAgainst: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"'main'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      saveToGit: process.env."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"CI"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" ==="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 'true'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      generateDashboard: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    }),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  ],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Framework-specific examples (Nuxt, SvelteKit, SolidStart, Astro) live in "},{"type":"element","tag":"a","props":{"href":"./framework-recipes"},"children":[{"type":"text","value":"Framework Recipes"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"reference-implementation"},"children":[{"type":"text","value":"Reference implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"examples/vite-app"}]},{"type":"text","value":" for a complete setup with source maps, dashboard generation, and CI-ready defaults:"}]},{"type":"element","tag":"pre","props":{"code":"pnpm --filter example-vite build\nopen examples/vite-app/bundle-report/index.html\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --filter"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" example-vite"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" build\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" examples/vite-app/bundle-report/index.html\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"options-recap"},"children":[{"type":"text","value":"Options recap"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Option"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Notes"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"enabled"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Skip the plugin entirely if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"compareAgainst"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Loads metrics from Git storage and runs "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"compareMetrics"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saveToGit"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"CI ? true : false"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Persists metrics to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bundlewatch-data"}]},{"type":"text","value":" branch."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"generateDashboard"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Creates "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"bundle-report/index.html"}]},{"type":"text","value":" with a treemap."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"failOnSizeIncrease"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Throws if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"totalSize"}]},{"type":"text","value":" grows beyond "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sizeIncreaseThreshold"}]},{"type":"text","value":"."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"output-directory"},"children":[{"type":"text","value":"Output directory"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"BundleWatch resolves "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"config.build.outDir"}]},{"type":"text","value":" and scans that directory after the build finishes. If you customise the output directory (e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"build: { outDir: 'app-dist' }"}]},{"type":"text","value":") the plugin picks it up automatically."}]},{"type":"element","tag":"h3","props":{"id":"github-actions-tips"},"children":[{"type":"text","value":"GitHub Actions tips"}]},{"type":"element","tag":"pre","props":{"code":"permissions:\n  contents: write\nsteps:\n  - uses: actions/checkout@v4\n    with:\n      fetch-depth: 0\n  - uses: actions/setup-node@v4\n    with:\n      node-version: 24\n  - uses: pnpm/action-setup@v2\n    with:\n      version: 9\n  - run: pnpm install\n  - run: pnpm build\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"permissions:\n  contents: write\nsteps:\n  - uses: actions/checkout@v4\n    with:\n      fetch-depth: 0\n  - uses: actions/setup-node@v4\n    with:\n      node-version: 24\n  - uses: pnpm/action-setup@v2\n    with:\n      version: 9\n  - run: pnpm install\n  - run: pnpm build\n"}]}]},{"type":"element","tag":"h3","props":{"id":"parser-upgrade-status"},"children":[{"type":"text","value":"Parser upgrade status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"packages/parsers/src/vite.ts"}]},{"type":"text","value":" already implements "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"createAnalyzerState"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"collectModuleInfo"}]},{"type":"text","value":", and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"analyzeBundle"}]},{"type":"text","value":". Once the plugin swaps "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"closeBundle"}]},{"type":"text","value":" for "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"generateBundle"}]},{"type":"text","value":" it will:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Capture module info via Vite’s "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"moduleParsed"}]},{"type":"text","value":" hook."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Call "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"analyzeBundle"}]},{"type":"text","value":" with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"OutputBundle"}]},{"type":"text","value":" object."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Gain module-level metrics, dependency graphs, and source-file stats—unlocking the enhanced dashboard."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Track progress in the repository’s issue tracker ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"vite-parser-migration"}]},{"type":"text","value":")."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"install","depth":2,"text":"Install"},{"id":"configure","depth":2,"text":"Configure","children":[{"id":"reference-implementation","depth":3,"text":"Reference implementation"},{"id":"options-recap","depth":3,"text":"Options recap"},{"id":"output-directory","depth":3,"text":"Output directory"},{"id":"github-actions-tips","depth":3,"text":"GitHub Actions tips"},{"id":"parser-upgrade-status","depth":3,"text":"Parser upgrade status"}]}]}},"_type":"markdown","_id":"content:vite.md","_source":"content","_file":"vite.md","_stem":"vite","_extension":"md"}